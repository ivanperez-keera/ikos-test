name: Check IKOS on mac

on: [push, pull_request]

jobs:
  Install:

    runs-on: macos-latest

    steps:
    - uses: actions/checkout@v4
    - name: Update Homebrew
      run: |
        brew update --preinstall
    - name: Install Homebrew dependencies
      run: |
        echo "SDKROOT=$(xcrun --show-sdk-path)" >> $GITHUB_ENV
        env HOMEBREW_NO_AUTO_UPDATE=1 brew install --build-from-source ./apron.rb
        env HOMEBREW_NO_AUTO_UPDATE=1 brew install --build-from-source ./ikos.rb || cat /Users/runner/Library/Logs/Homebrew/ikos/04.make
